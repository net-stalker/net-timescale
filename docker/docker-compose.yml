version: '3.8'

services:
  timescaledb:
    build:
      context: timescaledb
    hostname: timescaledb
    ports:
      - "5433:5432"
    environment:
      - POSTGRES_PASSWORD=PsWDgxZb
    networks:
      - skynet

  timescaledb-migrations:
    build:
      context: migrations
    container_name: timescaledb-migrations
    environment:
      # https://docs.liquibase.com/parameters/home.html
      - LIQUIBASE_COMMAND_URL=jdbc:postgresql://timescaledb:5432/postgres
      - LIQUIBASE_COMMAND_USERNAME=liquibase
      - LIQUIBASE_COMMAND_PASSWORD=PsWDgxZb
      - LIQUIBASE_LOG_LEVEL=INFO
    depends_on:
      - timescaledb
    networks:
      - skynet

networks:
  skynet:
    driver: bridge